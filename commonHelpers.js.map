{"version":3,"file":"commonHelpers.js","sources":["../src/js/app.js"],"sourcesContent":["const API_KEY = '44529920-2c5437e602f6361a7a48a154a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 40;\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', fetchImages);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  searchQuery = event.target.searchQuery.value.trim();\n  if (!searchQuery) return;\n\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  try {\n    const response = await fetch(`${BASE_URL}?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`);\n    const data = await response.json();\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n      });\n      return;\n    }\n\n    renderGallery(data.hits);\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    iziToast.success({\n      title: 'Success',\n      message: `Hooray! We found ${data.totalHits} images.`,\n    });\n\n    page += 1;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  }\n}\n\nfunction renderGallery(images) {\n  const markup = images.map(image => {\n    return `\n      <a href=\"${image.largeImageURL}\" class=\"photo-card\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n      </a>\n    `;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n"],"names":["API_KEY","BASE_URL","searchQuery","page","perPage","form","gallery","loadMoreBtn","onSearch","fetchImages","event","data","renderGallery","images","markup","image"],"mappings":"ssBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEjB,IAAIC,EAAc,GACdC,EAAO,EACX,MAAMC,EAAU,GAEVC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvDF,EAAK,iBAAiB,SAAUG,CAAQ,EACxCD,EAAY,iBAAiB,QAASE,CAAW,EAEjD,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EACpBR,EAAcQ,EAAM,OAAO,YAAY,MAAM,KAAI,EAC5CR,IAELC,EAAO,EACPG,EAAQ,UAAY,GACpBC,EAAY,MAAM,QAAU,OAE5B,MAAME,EAAW,EACnB,CAEA,eAAeA,GAAc,CAC3B,GAAI,CAEF,MAAME,EAAO,MADI,MAAM,MAAM,GAAGV,CAAQ,QAAQD,CAAO,MAAME,CAAW,iEAAiEC,CAAI,aAAaC,CAAO,EAAE,GACvI,OAE5B,GAAIO,EAAK,KAAK,SAAW,EAAG,CAC1B,SAAS,MAAM,CACb,MAAO,QACP,QAAS,0EACjB,CAAO,EACD,MACD,CAEDC,EAAcD,EAAK,IAAI,EAEnBR,EAAOC,GAAWO,EAAK,WACzBJ,EAAY,MAAM,QAAU,OAC5B,SAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAEDA,EAAY,MAAM,QAAU,QAG9B,SAAS,QAAQ,CACf,MAAO,UACP,QAAS,oBAAoBI,EAAK,SAAS,UACjD,CAAK,EAEDR,GAAQ,CACT,MAAe,CACd,SAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,CACF,CACH,CAEA,SAASS,EAAcC,EAAQ,CAC7B,MAAMC,EAASD,EAAO,IAAIE,GACjB;AAAA,iBACMA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,+CAEXA,EAAM,KAAK;AAAA,+CACXA,EAAM,KAAK;AAAA,kDACRA,EAAM,QAAQ;AAAA,mDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAI/D,EAAE,KAAK,EAAE,EAEVT,EAAQ,mBAAmB,YAAaQ,CAAM,EAE7B,IAAI,eAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB"}